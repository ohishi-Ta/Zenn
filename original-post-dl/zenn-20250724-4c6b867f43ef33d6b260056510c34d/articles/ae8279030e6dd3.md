---
title: "ã€Terraformã€‘Route53ã®ä½œæˆ"
emoji: "ğŸ¤–"
type: "tech"
topics:
  - "aws"
  - "terraform"
  - "route53"
published: true
published_at: "2025-01-13 21:58"
---

## ã¯ã˜ã‚ã«
Terraformã§Route53ã®è¨­å®šã‚’ã—ã¦ã„ãã¾ã™ã€‚

## ã‚¾ãƒ¼ãƒ³ã®ä½œæˆ
- domainã‚’å¤‰æ•°åŒ–ã—ã¦ãŠãã¾ã™ã€‚
```HCL:main.tf
variable "domain" {
  type = string
}
```
```HCL:terraform.tfvars
domain      = "example.com"
```

### aws_route53_zone
1. name : string : Route53ã‚¾ãƒ¼ãƒ³å
2. force_destroy : bool : å‰Šé™¤æ™‚ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã¦ã‚ˆã„ã‹ã©ã†ã‹

```HCL:route53.tf
#------------------
#Route53
#------------------
resource "aws_route53_zone" "route53_zone" {
  name          = var.domain
  force_destroy = false

  tags = {
    Name    = "${var.project}-${var.environment}-domain"
    Project = var.project
    Env     = var.environment
  }
}
```

### aws_route53_record
### Aãƒ¬ã‚³ãƒ¼ãƒ‰ï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰
1. zone_id : string : ãƒ›ã‚¹ãƒˆã‚¾ãƒ¼ãƒ³ID
2. name : string : ãƒ¬ã‚³ãƒ¼ãƒ‰å
3. type : enum : "A"
4. ttl : number : TTLï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æœŸé–“:ç§’ï¼‰
5. records : string[] : ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…ˆï¼ˆEIPãªã©ï¼‰
6. allow_overwrite : bool :ã€€æ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã€ä¸Šæ›¸ãã—ã¦ã‚ˆã„ã‹ã©ã†ã‹

### Aãƒ¬ã‚³ãƒ¼ãƒ‰ï¼ˆAWSãƒªã‚½ãƒ¼ã‚¹ï¼‰
1. zone_id : string : ãƒ›ã‚¹ãƒˆã‚¾ãƒ¼ãƒ³ID
2. name : string : ãƒ¬ã‚³ãƒ¼ãƒ‰å
3. type : enum : "A"
6. allow_overwrite : bool :ã€€æ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã€ä¸Šæ›¸ãã—ã¦ã‚ˆã„ã‹ã©ã†ã‹
7. alias : block :ã€€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…ˆï¼ˆAWSãƒªã‚½ãƒ¼ã‚¹ï¼‰
    - name : string : DNSãƒ‰ãƒ¡ã‚¤ãƒ³å
    - zone_id : string : ãƒ›ã‚¹ãƒˆã‚¾ãƒ¼ãƒ³å
    -  evaluate_target_health : bool : ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‹ã©ã†ã‹

 ```HCL:route53.tf
#------------------
#Route53 ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
#------------------
resource "aws_route53_record" "route53_record" {
    zone_id = aws_route53_zone.route53_zone.id
    name = "dev-elb.${var.domain}"
    type = "A"
    alias {
      name = aws_lb.alb.dns_name
      zone_id = aws_lb.alb.zone_id
      evaluate_target_health = true
    }
}
```

## ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®š
Route53ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹4ã¤ã®nsãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è³¼å…¥ã—ãŸä¼šç¤¾ã®ç®¡ç†ç”»é¢ã§è¨­å®šã—ã¦ã„ãã€‚