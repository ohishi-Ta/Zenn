---
title: "ã€CodePipelineã€‘ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§ã€ŒAWS Lambdaã€ã‚’ç›´æ¥æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ"
emoji: "ğŸ‘Œ"
type: "tech"
topics:
  - "aws"
  - "lambda"
  - "codepipeline"
  - "codecommit"
published: true
published_at: "2025-05-21 17:05"
---

# ã¯ã˜ã‚ã«
2025å¹´5æœˆ16æ—¥ã®å…¬å¼ã®ç™ºè¡¨ã«ã‚ˆã‚Šã€AWS CodePipeline ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§AWS LambdaãŒæŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€Lambdaé–¢æ•°ã®æ›´æ–°ãŒç°¡å˜ã«ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã¾ãŸã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚‚æ›´æ–°ãƒ»æŒ‡å®šãŒã§ãã¾ã™ã€‚
ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥ã‚„ã‚¢ãƒ©ãƒ¼ãƒ ã«ã‚ˆã‚‹ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®æ§‹æˆã‚‚ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
https://aws.amazon.com/jp/about-aws/whats-new/2025/05/aws-codepipeline-deploying-lambda-traffic-shifting/

ä»Šå›ã¯ç°¡å˜ã«CodeCommitã§Lambdaé–¢æ•°ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ãŠãã€CodePipelineã§æ›¸ãæ›ãˆã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

# 1.Lambdaé–¢æ•°ã®æº–å‚™
ã‚ã‚‰ã‹ã˜ã‚Lambdaé–¢æ•°ã‚’æº–å‚™ã—ã¦ãŠãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/cfd12cb2300e-20250521.png)

# 2.CodeCommitã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ—ãƒƒã‚·ãƒ¥
ã“ã“ã§ã¯CodeCommitã®è¨­å®šã¯çœç•¥ã—ã¾ã™ã€‚
ä¸‹è¨˜ã®ã‚ˆã†ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

```py:lambda_function.py
def lambda_handler(event, context):
    return "Hello from Lambda"
```
![](https://storage.googleapis.com/zenn-user-upload/cfd11e09a05e-20250521.png)

# 3.CodePipelineã®ä½œæˆ
`ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼`ã«ã€ŒCodeCommitã€ã‚’æŒ‡å®šã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/b670dbee0122-20250521.png)

ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¸ã€ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒ¼ã‚¸ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€
ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ãƒ†ãƒ¼ã‚¸ã®`ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼`ã§ã€ŒAWS Lambdaã€ã‚’é¸æŠã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/bbcb1ee135d0-20250521.png)

é–¢æ•°åã‚’æŒ‡å®šã—ã€ä½œæˆã—ã¾ã™ã€‚
ã¾ãŸã€äº‹å‰ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æŒ‡å®šãŒã‚ã‚‹å ´åˆã¯ã“ã“ã§è¨­å®šãŒã§ãã¾ã™ã€‚
å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚‚è¼‰ã›ã¦ãŠãã¾ã™ã€‚
https://docs.aws.amazon.com/codepipeline/latest/userguide/action-reference-LambdaDeploy.html

![](https://storage.googleapis.com/zenn-user-upload/4303a6142226-20250521.png)

ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã€æˆåŠŸã—ã¾ã—ãŸã€‚
![](https://storage.googleapis.com/zenn-user-upload/cbe2d2e297bd-20250521.png)

`$LATEST`ã®Lambdaé–¢æ•°ã‚‚æ›´æ–°ã•ã‚Œã¦ã„ã¾ã™ã­ã€‚
![](https://storage.googleapis.com/zenn-user-upload/231e140eddc9-20250521.png)

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚è‡ªå‹•ã§æ›´æ–°ã•ã‚Œã¦ã„ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/e9017c2898b8-20250521.png)

# ãŠã‚ã‚Šã«
ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ãŒã€ä»¥ä¸ŠãŒCodePipelineã§Lambdaé–¢æ•°ã‚’æ›´æ–°ã™ã‚‹æ–¹æ³•ã§ã—ãŸã€‚
ä»¥å‰ã¯buildspec.ymlã«AWS CLIã§æ›´æ–°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã¾ã—ãŸãŒã€ä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¨ã¦ã‚‚ç°¡å˜ã«ãªã‚Šã¾ã—ãŸã€‚

ã€Œã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚·ãƒ•ãƒˆæ©Ÿèƒ½ã€ã‚’ä½¿ã£ãŸã‚Šã€ã€ŒCloudWatch ã‚¢ãƒ©ãƒ¼ãƒ ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€ã‚’å®Ÿè£…ã—ãŸã‚Šã‚‚ã§ãã‚‹ãã†ã§ã™ã€‚
ã“ã¡ã‚‰ã®æ–¹ã®è¨˜äº‹ã‚’å‚è€ƒã—ã¾ã—ãŸã€‚
https://dev.classmethod.jp/articles/codepipeline-deploying-lambda-traffic-shifting/


