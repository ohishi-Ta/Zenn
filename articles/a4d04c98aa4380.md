---
title: "ã€AWS Control Towerã€‘ Account Factory Customization (AFC)ã§AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆå¾Œã®ãƒªã‚½ãƒ¼ã‚¹ä½œæˆã‚’è‡ªå‹•åŒ–ã—ã¦ã¿ãŸ"
emoji: "ğŸ˜º"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: 
  - "aws"
  - "controltower"
  - "accountfactory"
published: true
published_at: "2025-07-08 20:22"
---
# ã¯ã˜ã‚ã«
`Control Tower`ã®`Account Factory`ã‚’ä½¿ç”¨ã™ã‚Œã°ã€æ–°ã—ã„AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è‡ªå‹•ã§ä½œæˆã§ãã¾ã™ã€‚
ãŸã ã€ã“ã®ä½œæˆã™ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯`Control Tower`ã§è¨­å®šã•ã‚Œã‚‹æ¨™æº–çš„ãªè¨­å®šã—ã‹ä»˜ä¸ã•ã‚Œã¾ã›ã‚“ã€‚
æ–°è¦ä½œæˆã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«åŒã˜ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãŠããŸã„å ´åˆã‚„å…±é€šã®è¨­å®šã‚’ã—ã¦ãŠããŸã„å ´åˆã¯ã€`Account Factory Customizationï¼ˆAFCï¼‰`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€**ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆç›´å¾Œã®ã‚«ã‚¹ã‚¿ãƒ è¨­å®š**ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»Šå›ã¯ä»¥ä¸‹ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹æ–¹æ³•ã§`AFC`ã‚’ä½¿ç”¨ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

https://aws.amazon.com/jp/blogs/news/automate-account-customization-using-account-factory-customization-in-aws-control-tower/

# å‰ææ¡ä»¶
- `Control Tower`ã‚’æœ‰åŠ¹åŒ–ã—ã€`Account Factory`ãŒä½¿ç”¨ã§ãã‚‹çŠ¶æ…‹ã«ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚
ã“ã¡ã‚‰ã®è¨˜äº‹ã«è©³ã—ã„æ‰‹é †ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã®ã§ã€å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
https://blog.serverworks.co.jp/2024/11/18/125830


# å®Ÿè£…
## ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ/ãƒ­ãƒ¼ãƒ«ä½œæˆ
>ãƒ–ãƒ«ãƒ¼ãƒ—ãƒªãƒ³ãƒˆã‚’ä¸€å…ƒçš„ã«ç®¡ç†ã™ã‚‹ã€åŒã˜çµ„ç¹”å†…ã«ã‚ã‚‹ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç”¨æ„ã—ã¾ã™ã€‚ãŠå®¢æ§˜ã¯ AFC ã‚’ä½¿ç”¨ã™ã‚‹å‰ã«ã€ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã« AWSControlTowerBlueprintAccess ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãšã€ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§`AWSControlTowerBlueprintAccess`ã¨ã„ã†åå‰ã®ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚
ç›´æ¥ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨SCPã§IAMãƒ­ãƒ¼ãƒ«ãŒä½œæˆã§ããªã„ã®ã§ã€ç®¡ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰`Switch Role`ã§ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å…¥ã‚Šã¾ã—ã‚‡ã†ã€‚

**ãƒ­ãƒ¼ãƒ«å**ï¼š**AWSControlTowerBlueprintAccess**
**è¨±å¯ãƒãƒªã‚·ãƒ¼**ï¼š**AWSServiceCatalogAdminFullAccess**

```:ä¿¡é ¼ãƒãƒªã‚·ãƒ¼
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::ç®¡ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID:role/service-role/AWSControlTowerAdmin"
            },
            "Action": "sts:AssumeRole"
        }
    ]
}
```

https://docs.aws.amazon.com/ja_jp/controltower/latest/userguide/step-1-create-blueprint-access-role.html


## ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸Service Catalog ã®ç®¡ç†è€…ã‚’å§”ä»»
ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸Service Catalog ã®ç®¡ç†è€…ã‚’å§”ä»»ã™ã‚‹ä½œæ¥­ã‚’ã—ã¦ã„ãã¾ã™ã€‚
ã“ã®è¨­å®šã‚’ã™ã‚‹ã“ã¨ã§ã€Service Catalogã®è£½å“ã‚’ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ä¸€å…ƒç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ç®¡ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§CloudShellã‚’é–‹ãã€ä¸‹è¨˜ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```
aws organizations enable-aws-service-access --service-principal servicecatalog.amazonaws.com
aws organizations register-delegated-administrator --account-id ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID --service-principal servicecatalog.amazonaws.com
```

https://qiita.com/yoyoyo_pg/items/1b052664f9d9fb9498ff
https://dev.classmethod.jp/articles/manage-aws-organizations-service-integration-and-delegation-from-cli/

## ãƒãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§è£½å“ç™»éŒ²
ä»Šå›ã¯æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆå¾Œè‡ªå‹•ã§S3ãƒã‚±ãƒƒãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹è£½å“ã‚’ä½œæˆã—ã¾ã™ã€‚
```
AWSTemplateFormatVersion: '2010-09-09'
Description: "Minimal test blueprint"

Resources:
  TestBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: "afc-test-temp2025-bucket"
```

![](https://storage.googleapis.com/zenn-user-upload/4d5dc452d9b8-20250916.png)
![](https://storage.googleapis.com/zenn-user-upload/c68630fc62d2-20250916.png)

## ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«è£½å“ã‚’ç´ã¥ã‘ã‚‹
ã“ã“ã¾ã§ã§ããŸã‚‰ã€Account Factoryã§ç®¡ç†ã—ã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«è£½å“ã‚’ç´ã¥ã‘ã¾ã™ã€‚
æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚‚æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚‚å¯èƒ½ã§ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/8699bc70def5-20250916.png)

æ–°è¦ä½œæˆ or æ›´æ–°ã‚’ã—ãŸå¾Œã€è©²å½“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å…¥ã‚ŠS3ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚

å•é¡Œãªãã€Service CatalogãŒèµ·å‹•ã—ã¦ã„ã¾ã™ã­ï¼
![](https://storage.googleapis.com/zenn-user-upload/be055b9dbaa5-20250916.png)


# ãŠã‚ã‚Šã«
`Account Factory Customization (AFC)`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆå¾Œã®æ‰‹å‹•è¨­å®šã‚„å€‹åˆ¥ãƒ‡ãƒ—ãƒ­ã‚¤ã®æ‰‹é–“ã‚’å‰Šæ¸›ã§ãã¾ã™ã€‚
AFCã‚’ä½¿ç”¨ã—ãŸãƒ–ãƒ­ã‚°ã¯ã‚ã¾ã‚Šå¤šããªã„å°è±¡ã§ã™ã®ã§ã€ä»Šå¾Œã‚‚æ°—ã¥ããŒã‚ã‚Œã°æ›´æ–°ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚